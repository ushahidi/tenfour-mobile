<ion-header>
  <ion-navbar color="navbar">
    <ion-buttons left>
      <button ion-button color="cancel" (click)="cancelEdit($event)">Cancel</button>
    </ion-buttons>
    <ion-title>Active Directory (LDAP)</ion-title>
    <ion-buttons right>
      <button ion-button color="primary" (click)="doneEdit($event)">Done</button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content>
  <ion-list *ngIf="organization">

    <ion-item text-wrap no-lines class="info">
      <p>If your organization manages users using an LDAP or Active Directory server, you can
        configure TenFour to synchronize your users and groups.</p>
    </ion-item>

    <ion-item color="white">
      <ion-icon ios="ios-sync" md="md-sync" item-left></ion-icon>
      <ion-label><h2>Enable Active Directory (LDAP) Synchronization</h2></ion-label>
      <ion-toggle [(ngModel)]="setting.enabled"></ion-toggle>
    </ion-item>

    <ion-item color="white">
      <ion-label><h2>LDAP URL</h2></ion-label>
      <ion-input [disabled]="!setting.enabled" type="url" autocorrect="off" autocapitalize="off" autocomplete="off" placeholder="ldap://example.org:389" [(ngModel)]="setting.url"></ion-input>
    </ion-item>

    <ion-item color="white">
      <ion-label><h2>Auth User</h2></ion-label>
      <ion-input [disabled]="!setting.enabled" type="text" autocorrect="off" autocapitalize="off" autocomplete="off" placeholder="" [(ngModel)]="setting.user"></ion-input>
    </ion-item>

    <ion-item color="white">
      <ion-label><h2>Auth Password</h2></ion-label>
      <ion-input [disabled]="!setting.enabled" type="password" autocorrect="off" autocapitalize="off" autocomplete="off" placeholder="" [(ngModel)]="setting.password"></ion-input>
    </ion-item>

    <ion-item color="white">
      <ion-label><h2>Base DN</h2></ion-label>
      <ion-input [disabled]="!setting.enabled" type="text" autocorrect="off" autocapitalize="off" autocomplete="off" placeholder="dc=example,dc=org" [(ngModel)]="setting.base_dn"></ion-input>
    </ion-item>

    <ion-item color="white">
      <ion-label><h2>User Filter</h2></ion-label>
      <ion-input [disabled]="!setting.enabled" type="text" autocorrect="off" autocapitalize="off" autocomplete="off" placeholder="(objectClass=user)" [(ngModel)]="setting.user_filter"></ion-input>
    </ion-item>

    <ion-item color="white">
      <ion-label><h2>Group Filter</h2></ion-label>
      <ion-input [disabled]="!setting.enabled" type="text" autocorrect="off" autocapitalize="off" autocomplete="off" placeholder="(objectClass=group)" [(ngModel)]="setting.group_filter"></ion-input>
    </ion-item>

    <ion-item text-wrap no-lines class="info" *ngIf="setting.latest_sync_at">
      <p>Latest synchronization was at {{setting.latest_sync_at | dateTime}}</p>
    </ion-item>


  </ion-list>
</ion-content>
