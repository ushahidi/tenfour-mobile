<ion-header>
  <ion-navbar color="navbar">
    <ion-title></ion-title>
    <ion-buttons end *ngIf="rollcall">
      <button ion-button color="primary" [disabled]="rollcall.recipients == null || rollcall.recipients.length == 0"  (click)="sendRollcall($event)">Send</button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content>
  <ion-list *ngIf="rollcall">
    <ion-item text-wrap text-center color="white">
      <person-avatar [initials]="rollcall.user_initials" [image]="rollcall.user_picture" [large]="true"></person-avatar>
      <h1>{{rollcall.message}}</h1>
    </ion-item>
  </ion-list>
  <ion-list *ngIf="rollcall">
    <ion-item color="white" detail-push tappable (click)="showPopover($event)">
      <ion-label>Send via</ion-label>
      <ion-note item-end>{{rollcall.send_via}}</ion-note>
    </ion-item>
  </ion-list>
  <ion-list *ngIf="rollcall">
    <ion-list-header>Send To</ion-list-header>
    <ion-item color="white" tappable (click)="addPerson()">
      <h2 ion-text color="primary">Add people</h2>
    </ion-item>
    <ion-item color="white" *ngFor="let group of rollcall.groups">
      <ion-icon item-left class="group-icon" ios="ios-people" md="md-people"></ion-icon>
      <h2>{{group.name}}</h2>
      <button ion-button icon-only item-right clear color="black" tappable (click)="removeGroup(group)">
        <ion-icon color="grey" ios="ios-close-circle" md="md-close-circle"></ion-icon>
      </button>
    </ion-item>
    <ion-item color="white" *ngFor="let recipient of rollcall.recipients">
      <person-avatar item-left [initials]="recipient.initials" [image]="recipient.profile_picture" [large]="false"></person-avatar>
      <h2>{{recipient.name}}</h2>
      <button ion-button icon-only item-right clear color="black" tappable (click)="removeRecipient(recipient)">
        <ion-icon color="grey" ios="ios-close-circle" md="md-close-circle"></ion-icon>
      </button>
    </ion-item>
  </ion-list>
</ion-content>
